## 一、⭐互联网的组成

从互联网的工作方式上看，可以划分为两大块：

**边缘部分**： 由所有连接在互联网上的主机组成。这部分是用户直接使用的，用来进行通信（传送数据、音频或视频）和资源共享。

**核心部分**：由大量网络和连接这些网络的路由器组成。这部分是为边缘部分提供服务的（提供连通性和交换）。

### 1. 互联网的边缘部分

处在互联网边缘的部分就是连接在互联网上的所有的主机。这些主机又称为**端系统** (end system)。

<u>端系统在功能上可能有很大的差别：</u>

1. 小的端系统可以是一台普通个人电脑，具有上网功能的智能手机，甚至是一个很小的网络摄像头。

2. 大的端系统则可以是一台非常昂贵的大型计算机。

3. 端系统的拥有者可以是个人，也可以是单位（如学校、企业、政府机关等），当然也可以是某个   ISP。

#### (1) 端系统之间通信的含义

“主机 A 和主机 B 进行通信” 实际上是指：

主机 A 的某个进程和主机 B 上的另一个进程进行通信，简称为 “计算机之间通信”。

#### (2) 端系统之间的两种通信方式

通常划分为两大类：

1. **客户-服务器方式**，即 Client/Server 方式，简称为 **C/S 方式**。 

2. **对等方式**，即 Peer-to-Peer 方式 ，简称为 **P2P 方式**。

##### A. 客户-服务器方式

- **客户** (client) 和**服务器** (server) 都是指通信中所涉及的两个应用进程。

- 客户-服务器方式所描述的是进程之间服务和被服务的关系。

- 客户是<u>服务的请求方</u>，服务器是<u>服务的提供方</u>。

- 两者都需要使用网络核心部分所提供的服务。

###### a. 客户软件特点

<u>被用户调用后运行</u>，在打算通信时主动向远地服务器发起通信（请求服务）。因此，<u>客户程序必须知道服务器程序的地址</u>。

###### b. 服务器软件的特点

- 一种专门用来提供某种服务的程序，可同时处理多个远地或本地客户的请求。

- 系统启动后即自动调用并<u>一直不断地运行着，被动地等待</u>并接受来自各地的客户的通信请求。因此，<u>服务器程序不需要知道客户程序的地址</u>。

- 一般需要强大的硬件和高级的操作系统支持。
- 客户与服务器的通信关系建立后，通信可以是双向的，客户和服务器都可发送和接收数据。

##### B. 对等连接方式

- <u>对等连接</u> (peer-to-peer，简写为 P2P ) 是指两个主机在通信时并不区分哪一个是服务请求方还是服务提供方。

- 只要两个主机都运行了对等连接软件 ( P2P 软件) ，它们就可以进行<u>平等的、对等连接通信</u>。

- 双方都可以下载对方已经存储在硬盘中的共享文档。

###### 对等连接方式的特点

- 对等连接方式从本质上看仍然是使用客户服务器方式，只是对等连接中的<u>每一个主机既是客户又是服务器</u>。



### 2. 互联网的核心部分

典型交换技术包括：

1. 电路交换

2. 分组交换

3. 报文交换 等等

互联网的核心部分采用了 <u>分组交换</u> 技术。

#### (1) 电路交换的特点

N 部电话机两两直接相连，需 <u>N(N –1)/2</u> 对电线。这种直接连接方法所需要的电线对的数量与电话机数量的平方 <u>(N^2)</u> 成正比。

##### A. 使用交换机

当电话机的数量增多时，就要使用**交换机**来完成全网的交换任务。所采用的交换方式就是**电路交换**。

##### B. “交换”的含义

- “**交换**” 的含义就是**转接** —— 把一条电话线转接到另一条电话线，使它们连通起来。

- 从通信资源的分配角度来看，“交换”就是按照某种方式**动态地分配**传输线路的资源。

##### C. 电路交换特点

电路交换必定是**面向连接**的。 

电路交换分为三个阶段：

1. **建立连接**：建立一条专用的物理通路，以保证双方通话时所需的通信资源在通信时不会被其他用户占用；

2. **通信**：主叫和被叫双方就能互相通电话；

3. **释放连接**：释放刚才使用的这条专用的物理通路（释放刚才占用的所有通信资源）。



#### (2) 分组交换的特点

- 分组交换则采用存储转发技术。

- 在发送端，先把较长的报文划分成较短的、固定长度的数据段。

##### A. 分组交换过程：

1. **分组**：在每个数据段前面添加**首部**构成**分组**。

2. **传输**：以**分组**为基本单位在网络中传送。

3. **接收**：接收端收到分组后<u>剥去</u>首部<u>还原</u>成报文。

##### B. 路由器

- 在路由器中的输入和输出端口之间没有直接连线。

- 路由器处理分组的过程是：

1. 把收到的分组先<u>放入缓存（暂时存储）</u>；

2. <u>查找转发表</u>，找出到某个目的地址应从哪个端口转发；

3. 把分组送到适当的端口<u>转发</u>出去。

> 主机和路由器的作用不同：
>
> > - **主机是**<u>为用户进行信息处理的</u>，并向网络发送分组，从网络接收分组。
> >
> > - **路由器**对分组进行<u>存储转发</u>，最后把分组交付目的主机。

##### C. 分组交换的缺点

- 分组在各结点存储转发时需要<u>排队</u>，这就会造成一定的<u>时延</u>。 

- 分组必须携带的首部（里面有必不可少的控制信息）也造成了一定的<u>开销</u>。 



#### (3) 报文交换

报文交换的时延较长，现在很少使用。



#### (4) 三种交换比较

- 若要连续传送大量的数据，且其传送时间远大于连接建立时间，则**电路交换**的传输速率较快。

- **报文交换**和**分组交换**不需要预先分配传输带宽，在传送突发数据时可提高整个网络的信道利用率。

- 由于一个分组的长度往往远小于整个报文的长度，因此**分组交换**比**报文交换**的时延小，同时也具有更好的灵活性。



## 二、⭐计算机网络的性能

### 1. 计算机网络的性能指标

#### (1) 速率

- **比特**（bit）是计算机中数据量的单位，也是信息论中使用的信息量的单位。

- 速率是计算机网络中最重要的一个性能指标，指的是**数据的传送速率**，它也称为**数据率** (data rate) 或**比特率** (bit rate)。

- 速率的单位是 bit/s，或 kbit/s、Mbit/s、 Gbit/s等。

- <u>速率往往是指额定速率或标称速率，非实际运行速率</u>。 

#### (2) 带宽

两种不同意义：

- “**带宽**” 本来是指信号具有的**频带宽度**，其单位是赫（或千赫、兆赫、吉赫等）。

- 在计算机网络中，带宽用来表示网络中某通道传送数据的能力。表示在单位时间内网络中的某信道所能通过的 “**最高数据率**”。单位是 bit/s，即 “比特每秒”。  

#### (3) 吞吐量

- **吞吐量**表示在单位时间内通过某个网络（或信道、接口）的数据量。

- 吞吐量更经常地用于对现实世界中的网络的一种测量，以便知道<u>实际上到底有多少数据量能够通过网络</u>。

- <u>吞吐量受网络的带宽或网络的额定速率的限制</u>。 

#### (4) 时延

- **时延**是指数据（一个报文或分组，甚至比特）从网络（或链路）的<u>一端传送到另一端所需的时间</u>。

- 有时也称为**延迟**或迟延。

网络中的时延由以下几个不同的部分组成：
$$
总时延 = 发送时延 + 传播时延 + 处理时延 + 排队时延
$$


##### A. 发送时延

- 也称为<u>传输时延</u>。

- 发送数据时，数据帧从**结点**进入到**传输媒体**所需要的时间。

- 也就是从发送数据帧的第一个比特算起，到该帧的最后一个比特发送完毕所需的时间。

$$
发送时延 = \frac{数据帧长度（bit）}{发送速率（bit/s）}
$$

##### B. 传播时延

- 电磁波在**信道**中需要传播一定的距离而花费的时间。 

- <u>发送时延/速率</u>与<u>传播时延/速率</u>有本质上的不同。

$$
传播时延 = \frac{信道长度（m）}{信号在信道上的传播速率（m/s）}
$$

##### C. 处理时延

主机或路由器在收到分组时，为处理分组（例如分析首部、提取数据、差错检验或查找路由）所花费的时间。 

##### D. 排队时延

- 分组在路由器输入输出队列中<u>排队等待处理</u>所经历的时延。
- 排队时延的长短往往取决于<u>网络中当时的通信量</u>。



#### (5) 时延带宽积

链路的时延带宽积又称为<u>以比特为单位的链路长度</u>。
$$
时延带宽积 = 传播时延 \times 带宽
$$


#### (6) 往返时RTT

- 互联网上的信息不仅仅单方向传输，而是双向交互的。因此，有时很需要知道双向交互一次所需的时间。

- **往返时间 RTT** 表示从发送方发送数据开始，到发送方收到来自接收方的确认，总共经历的时间。

- 在互联网中，往返时间还包括<u>各中间结点</u>的处理时延、排队时延以及转发数据时的发送时延。

- <u>当使用卫星通信时，往返时间 RTT 相对较长，是很重要的一个性能指标</u>。

#### (7) 利用率

- 分为**信道利用率**和**网络利用率**。

- **信道利用率**指出某信道有百分之几的时间是被利用的（有数据通过）。

- 完全空闲的信道的利用率是零。

- **网络利用率**则是全网络的信道利用率的加权平均值。

- 信道利用率<u>并非越高越好</u>。当某信道的利用率增大时，该信道引起的时延也就迅速增加。



#### 时延与网络利用率的关系

- 根据排队论的理论，当某<u>信道的利用率</u>增大时，该信道引起的<u>时延</u>也就急剧增加。（<u>正比</u>）

- 若令 D~0~（定值）表示网络空闲时的时延，D 表示网络当前的时延，U表示网络利用率，则在适当的假定条件下，可以用简单公式表示 D 和 D~0~ 之间的关系:

$$
D = \frac{D0}{1-U}
$$





### 2. 计算机网络的非性能特征

主要包括：

- 费用

- 质量

- 标准化

- 可靠性

- 可扩展性和可升级性

- 易于管理和维护



## 三、⭐计算机网络的体系结构

### 1. 计算机网络体系结构的形成

### 2. 协议与划分层次

### 3. 具有五层协议的体系结构

综合了OSI 和 TCP/IP 的优点。

五层：**应用层、运输层、网络层、数据链路层、物理层。**

### 4. 实体、协议、服务和服务访问点

- 实体：表示任何可发送或接收信息的硬件或软件进程。 
- 协议：控制两个对等实体进行通信的规则的集合。（水平层面）
- 服务：在协议控制下，向上一层/下一层提供的服务。（垂直层面）
- 服务访问点 (SAP)：同一系统相邻两层的实体进行交互的地方。

### 5. TCP/IP 的体系结构

TCP/IP 是四层体系结构：应用层、运输层、网际层、网络接口层。























