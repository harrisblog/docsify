## 一、创建数据库和表

#### 1. 创建Datebase

```mysql
CREATE DATABASE 数据库名称;
或者
CREATE DATABASE 数据库名称 charset = utf8;
```

> 注：
>
> > 1. 关键字大写或小写都可以
> > 2. 如果建表过程中，DEFAULT默认值含有中文，或有需要用到中文的地方，则需要加上charset = utf8



#### 2. 创建Table

```mysql
CREATE TABLE 表名(
字段1 数据类型1 列级完整性约束条件1,
字段2 数据类型2 列级完整性约束条件2,
...
表级完整性约束条件1,
表级完整性约束条件2,
...
表级完整性约束条件n
);
```

> 注：
>
> > 1. 字段和数据类型是必须写，其余可省略
> >2. 最后一行不加逗号



#### 3. 常用数据类型

| 常用数据类型 | 释义                               |
| ------------ | ---------------------------------- |
| char(n)      | 固定长度字符串                     |
| varchar(n)   | 可变长度字符串                     |
| tinyint      | 小整数值 (-127到-128)              |
| int          | 大整数值 (-2147483648到2147483647) |
| data         | 日期 (如2003-09-12)                |
| time         | 时间 (如23: 15: 003)               |
| datatime     | 日期和时间                         |
| float        | 单精度浮点                         |
| double       | 双精度浮点                         |

> 注：现行商用DBMS的数据类型有时和上面有些差异，但总体上是一致的。



## 二、表字段的增删改查

#### 1. 添加约束

##### (1) 列级完整性约束条件

| 列级完整性约束条件  | 对单一列的值进行约束                                         |
| ------------------- | ------------------------------------------------------------ |
| **PRIMARY KEY**     | 指定该字段为**主键**，可唯一识别对应的元组（**实体完整性约束**） |
| NULL / NOT NULL     | 指定该字段的值**能为空/不能为空**，若无约束条件，则默认为NULL |
| UNIQUE              | 指定该字段的值是**唯一的**，该字段不能重复出现               |
| AUTO_INCREMENT      | 指定该字段的值**自动递增**，一个表中只能是主键可以用它约束   |
| DEFAULT 默认值      | 为该属性设置**默认值**                                       |
| CHECK（条件表达式） | 对于输入值进行**条件判断**，满足则进，反之（**用户自定义完整性约束**） |

> 注：
>
> > 1. 主键PRIMARY KEY 不用定义是否为空，因为它本是不能为空的。
> >
> > 2. AUTO_INCREMENT 定义后可在表尾加上`AUTO_INCREMENT = 数值`，以此来定义自增初始值。
> >
> > 	如果不定义，则默认从1开始递增。
> >
> > 	```mysql
> > 	CREATE TABLE 表名(...)AUTO_INCREMENT = 数值;
> > 	```
> >
> > 3. 若DEFAULT后有中文（中文需要用单引号引上），则表尾需加上`DEFAULT CHARSET=utf8`，加不加因你使用的商用DBMS而异。
> >
> > 	**建议建数据库时就直接在句尾定义**`CHARSET = utf8`，否则每建一次表都要定义一次。
> >
> > 	```mysql
> > 	CREATE TABLE 表名(...)DEFAULT CHARSET = utf8;
> > 	```



##### (2)表级完整性约束条件

| 表级完整性约束条件 | 对多列值进行约束                                           |
| ------------------ | ---------------------------------------------------------- |
| PRIMARY KEY        | 定义表级**主键**约束（**实体完整性约束**）                 |
| FOREIGN KEY        | 指定某字段为**外键**，用于联系其它表（**参照完整性规则**） |



##### (3)列级约束

基本定义语法：

```mysql
字段名 数据类型 [约束条件],
```

> 注：[ ] 符号的意思是非必须写的条件



##### (4)表级约束

1) 定义主键语法：

```mysql
PRIMARY KEY (字段名1, 字段名2,...), 
或者
CONSTRAINT 约束名 PRIMARY KEY (字段名), 
或者
CONSTRAINT 约束名 PRIMARY KEY [CLUSTERED](字段名1,字段名2,...),
```

2) 定义外键语法：

```mysql
FOREIGN KEY(字段名) REFERENCES 引用表名(字段名),
或者
CONSTRAINT 约束名 FOREIGN KEY(字段名) REFERENCES 引用表名(字段名),
```

3) 定义CHECK约束语法：

```mysql
CHECK(判断条件),
或者
CONSTRAINT 约束名 CHECK(判断条件),
```

> 注：
>
> > 1. 除了此3种约束条件可用表级约束，其余的只能用列级约束
> > 2. 建议用第一种，简单好记



#### 2. 删除Table

```mysql
DROP TABLE IF EXISTS 表名;
```



#### 3. 修改Table

##### (1.1) 添加 字段

```mysql
ALTER TABLE 表名 ADD 新字段名 数据类型 [约束条件] [FIRST | AFTER 已存在字段名]; 
```

> 注：
>
> > 1. [FIRST] 表示在第一列添加，[AFTER 已存在字段名] 表示在已知字段后添加
> > 2. 不写 [FIRST|AFTER]，则默认把新字段添加到最后一列
> >3. | 符号表示选择其中一个

##### (1.2) 添加 完整性约束

```mysql
ALTER TABLE 表名 ADD CONSTRAINT 限制名 限制类型(字段名/限制条件); 
```

##### (2.1) 修改 表名

```mysql
ALTER TABLE 旧表名 RENAME 新表名;
```

##### (2.2) 修改 字段名

```mysql
ALTER TABLE 表名 CHANGE 旧字段名 新字段名 新数据类型;
```

##### (2.3) 修改 字段排列位置

```mysql
ALTER TABLE 表名 MODIFY 字段1 数据类型 FIRST | AFTER 字段2;
```

##### (2.4) 修改 数据类型

```mysql
ALTER TABLE 表名 MODIFY 字段名 新数据类型;
```

##### (3.1) 删除 字段

```mysql
ALTER TABLE 表名 DROP 字段名; 
```

##### (3.2) 删除 表的外键约束

```mysql
ALTER TABLE 表名 DROP FOREIGN KEY 外键约束名;
```

> 注：主键不能删除



#### 4. 查看Table

##### (1) 查看表基本组成

```mysql
DESC / DESCRIBE 表名;
```

​		`DESC / DESCRIBE`可以查看表的字段信息，包括：字段名、字段数据类型、是否为主键、是否有默认值等。

##### (2) 查看表结构信息

```mysql
SHOW CREATE TABLE 表名;
```

​		不仅仅可以返回给我们建表时所写的详细语句，而且还可以查看存储引擎和字符编码。



## 三、数据的增删改查

#### 1. 添加数据（插入数据）

##### (1) 为表添加<u>单条</u>数据

```mysql
INSERT INTO 表名 [(字段名1, 字段名2...)]
VALUES (值1, 值2...);
```

> 注：若字段名省略，则须与存储的字段名顺序一致；若未省略，则须与语句中字段名顺序一致

##### (2) 为表添加<u>多条</u>数据

```mysql
INSERT INTO 表名 [(字段名1, 字段名2...)] 
VALUES (内容1), (内容2), (内容3);
```

#### 2. 删除数据

##### (1) 删除表的指定行

```mysql
DELETE FROM 表名 WHERE 条件语句; 
```

##### (2) 删除表中所有行

```mysql
DELETE FROM 表名;
```

#### 3. 修改数据（更新数据）

```mysql
UPDATE 表名 SET 字段名1 = 内容1, 字段名2 = 内容2,... WHERE 过滤条件
```

#### 4. 查看数据

> 略，其它章节详细说明



## 本章补充与小结

#### 按位与运算

`例子：3 & 5 = 1`

解读：相当于二进制 011 和 101相加，两个二进制位都为1则为1，否则为0，所以结果是 001（十进制为1）。

